(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{3311:function(e,t,r){"use strict";r.r(t),r.d(t,{DEFAULT_ID:function(){return l},Loader:function(){return s},LoaderStatus:function(){return i}});var n,i,o=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var n,i,o,l=o[i];if(!e(t[l],r[l]))return!1}return!0}return t!=t&&r!=r};let l="__googleMapsScriptId";(n=i||(i={}))[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE";class s{constructor({apiKey:e,authReferrerPolicy:t,channel:r,client:n,id:i=l,language:a,libraries:c=[],mapIds:u,nonce:f,region:d,retries:h=3,url:p="https://maps.googleapis.com/maps/api/js",version:g}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=r,this.client=n,this.id=i||l,this.language=a,this.libraries=c,this.mapIds=u,this.nonce=f,this.region=d,this.retries=h,this.url=p,this.version=g,s.instance){if(!o(this.options,s.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(s.instance.options)}`);return s.instance}s.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?i.FAILURE:this.done?i.SUCCESS:this.loading?i.LOADING:i.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}let e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){let e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}},7212:function(e,t,r){!function(e,t,r){"use strict";var n,i=r&&"object"==typeof r&&"default"in r?r:{default:r};e.Status=void 0,(n=e.Status||(e.Status={})).LOADING="LOADING",n.FAILURE="FAILURE",n.SUCCESS="SUCCESS";let o=({children:n,render:o,callback:l,...s})=>{let[a,c]=r.useState(e.Status.LOADING);return(r.useEffect(()=>{let r=new t.Loader(s),n=e=>{l&&l(e,r),c(e)};n(e.Status.LOADING),r.load().then(()=>n(e.Status.SUCCESS),()=>n(e.Status.FAILURE))},[]),a===e.Status.SUCCESS&&n)?i.default.createElement(i.default.Fragment,null,n):o?o(a):i.default.createElement(i.default.Fragment,null)};e.Wrapper=o,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(3311),r(7294))},579:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/san-francisco-tour",function(){return r(2014)}])},227:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLocale=function(e,t,r,n){return!1},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(2648).Z,i=r(7273).Z,o=n(r(7294)),l=r(1003),s=r(7795),a=r(4465),c=r(2692),u=r(8245),f=r(9246),d=r(227),h=r(3468);let p=new Set;function g(e,t,r,n){if(l.isLocalURL(t)){if(!n.bypassPrefetchedCheck){let i=void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0,o=t+"%"+r+"%"+i;if(p.has(o))return;p.add(o)}Promise.resolve(e.prefetch(t,r,n)).catch(e=>{})}}function m(e){return"string"==typeof e?e:s.formatUrl(e)}let y=o.default.forwardRef(function(e,t){let r,n;let{href:s,as:p,children:y,prefetch:b,passHref:v,replace:E,shallow:x,scroll:S,locale:_,onClick:j,onMouseEnter:w,onTouchStart:C,legacyBehavior:I=!1}=e,L=i(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);r=y,I&&("string"==typeof r||"number"==typeof r)&&(r=o.default.createElement("a",null,r));let k=!1!==b,O=o.default.useContext(c.RouterContext),N=o.default.useContext(u.AppRouterContext),A=null!=O?O:N,M=!O,{href:P,as:R}=o.default.useMemo(()=>{if(!O){let e=m(s);return{href:e,as:p?m(p):e}}let[e,t]=l.resolveHref(O,s,!0);return{href:e,as:p?l.resolveHref(O,p):t||e}},[O,s,p]),U=o.default.useRef(P),D=o.default.useRef(R);I&&(n=o.default.Children.only(r));let T=I?n&&"object"==typeof n&&n.ref:t,[F,G,K]=f.useIntersection({rootMargin:"200px"}),$=o.default.useCallback(e=>{(D.current!==R||U.current!==P)&&(K(),D.current=R,U.current=P),F(e),T&&("function"==typeof T?T(e):"object"==typeof T&&(T.current=e))},[R,T,P,K,F]);o.default.useEffect(()=>{A&&G&&k&&g(A,P,R,{locale:_})},[R,P,G,_,k,null==O?void 0:O.locale,A]);let B={ref:$,onClick(e){I||"function"!=typeof j||j(e),I&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),A&&!e.defaultPrevented&&function(e,t,r,n,i,s,a,c,u,f){let{nodeName:d}=e.currentTarget,h="A"===d.toUpperCase();if(h&&(function(e){let{target:t}=e.currentTarget;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!l.isLocalURL(r)))return;e.preventDefault();let p=()=>{"beforePopState"in t?t[i?"replace":"push"](r,n,{shallow:s,locale:c,scroll:a}):t[i?"replace":"push"](n||r,{forceOptimisticNavigation:!f})};u?o.default.startTransition(p):p()}(e,A,P,R,E,x,S,_,M,k)},onMouseEnter(e){I||"function"!=typeof w||w(e),I&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),A&&(k||!M)&&g(A,P,R,{locale:_,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart(e){I||"function"!=typeof C||C(e),I&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),A&&(k||!M)&&g(A,P,R,{locale:_,priority:!0,bypassPrefetchedCheck:!0})}};if(!I||v||"a"===n.type&&!("href"in n.props)){let e=void 0!==_?_:null==O?void 0:O.locale,t=(null==O?void 0:O.isLocaleDomain)&&d.getDomainLocale(R,e,null==O?void 0:O.locales,null==O?void 0:O.domainLocales);B.href=t||h.addBasePath(a.addLocale(R,e,null==O?void 0:O.defaultLocale))}return I?o.default.cloneElement(n,B):o.default.createElement("a",Object.assign({},L,B),r)});t.default=y,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9246:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){let{rootRef:t,rootMargin:r,disabled:a}=e,c=a||!o,[u,f]=n.useState(!1),[d,h]=n.useState(null);n.useEffect(()=>{if(o){if(!c&&!u&&d&&d.tagName){let e=function(e,t,r){let{id:n,observer:i,elements:o}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=s.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=l.get(n)))return t;let i=new Map,o=new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e);return t={id:r,observer:o,elements:i},s.push(r),l.set(r,t),t}(r);return o.set(e,t),i.observe(e),function(){if(o.delete(e),i.unobserve(e),0===o.size){i.disconnect(),l.delete(n);let e=s.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&s.splice(e,1)}}}(d,e=>e&&f(e),{root:null==t?void 0:t.current,rootMargin:r});return e}}else if(!u){let e=i.requestIdleCallback(()=>f(!0));return()=>i.cancelIdleCallback(e)}},[d,c,r,t,u]);let p=n.useCallback(()=>{f(!1)},[]);return[h,u,p]};var n=r(7294),i=r(4686);let o="function"==typeof IntersectionObserver,l=new Map,s=[];("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2014:function(e,t,r){"use strict";r.r(t),r.d(t,{SfTour:function(){return C},__N_SSG:function(){return w},default:function(){return I}});var n=r(5893),i=r(4157),o=r.n(i),l=r(4184),s=r.n(l),a=r(1664),c=r.n(a),u=r(7294),f=r(3074),d=r(2598);let h=e=>{let{name:t,children:r,query:i,hash:o,...l}=e,a=f.jw[t],h=a.href(l)+(i?"?"+i:"")+(o?"#"+o:""),p=u.Children.only(r);return"object"==typeof p&&u.isValidElement(p)&&"a"===p.type?(0,n.jsx)(c(),{href:h,legacyBehavior:!0,children:u.cloneElement(p,{className:s()(p.props.className)})}):(d.k.warn("Children must be a single anchor element"),(0,n.jsx)(c(),{href:h,children:r}))};var p=r(8017),g=r(7212),m=r(4637),y=Object.prototype.hasOwnProperty;function b(e,t,r){for(r of e.keys())if(v(r,t))return r}function v(e,t){var r,n,i;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&v(e[n],t[n]););return -1===n}if(r===Set){if(e.size!==t.size)return!1;for(n of e)if((i=n)&&"object"==typeof i&&!(i=b(t,i))||!t.has(i))return!1;return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e)if((i=n[0])&&"object"==typeof i&&!(i=b(t,i))||!v(n[1],t.get(i)))return!1;return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return -1===n}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return -1===n}if(!r||"object"==typeof e){for(r in n=0,e)if(y.call(e,r)&&++n&&!y.call(t,r)||!(r in t)||!v(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!=e&&t!=t}let E=e=>{var t,r,i,o;let{style:l,onClick:s,onIdle:a,children:c,...f}=e,d=u.useRef(null),[h,p]=u.useState();return u.useEffect(()=>{d.current&&!h&&p(new window.google.maps.Map(d.current,{}))},[d,h]),t=()=>{h&&h.setOptions(f)},u.useEffect(t,(r=[h,f],i=u.useRef(r),o=u.useRef(0),v(r,i.current)||(i.current=r,o.current+=1),u.useMemo(function(){return i.current},[o.current]))),u.useEffect(()=>{h&&(["click","idle"].forEach(e=>google.maps.event.clearListeners(h,e)),s&&h.addListener("click",s),a&&h.addListener("idle",()=>a(h)),a&&h.addListener("",()=>a(h)))},[h,s,a]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:d,style:l}),u.Children.map(c,e=>{if(u.isValidElement(e))return u.cloneElement(e,{map:h})})]})},x=e=>{let{onClick:t,...r}=e,[n,i]=u.useState();return u.useEffect(()=>(n||i(new google.maps.Marker),()=>{n&&n.setMap(null)}),[n]),u.useEffect(()=>{if(n&&t){let e=n.addListener("click",()=>void t({marker:n,map:r.map}));return e.remove}},[n,t,r.map]),u.useEffect(()=>{n&&n.setOptions(r)},[n,r]),null};var S=r(3454);let _=S.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY,j={lat:37.7576948,lng:-122.4726192};var w=!0;let C=e=>{let{locations:t}=e,[r,i]=u.useState();u.useEffect(()=>{r&&console.log({currentLocation:r})},[r]);let l=u.useMemo(()=>t.map(e=>{let{data:{tour_coords:t},uid:r}=e;return(null==t?void 0:t.latitude)&&(null==t?void 0:t.longitude)?{lat:t.latitude,lng:t.longitude,uid:r}:void 0}).filter(m.ri),[t]);return(0,n.jsxs)("main",{className:" bg-neutral-100",children:[(0,n.jsx)("section",{className:"flex h-[100vh] justify-center bg-[url('/ferry-building-san-francisco-1912-mobile.jpg')] bg-cover bg-center bg-no-repeat text-center md:bg-[url('/ferry-building-san-francisco-1912.jpg')] md:bg-left ",children:(0,n.jsxs)("h1",{className:"".concat(o().className," max-w-5xl bg-gradient-to-t from-gray-600 to-gray-400 bg-clip-text pt-5 text-5xl text-transparent drop-shadow invert-0 sm:text-7xl md:pt-16 md:text-8xl lg:pt-20"),children:["Remembering"," ",(0,n.jsx)("span",{className:"whitespace-nowrap",children:"'Abdu'l-Bah\xe1’s"})," Time in ",(0,n.jsx)("span",{className:"whitespace-nowrap",children:"San Francisco"}),", 1912"]})}),(0,n.jsx)("section",{className:"container mx-auto grid grid-cols-1 gap-4 pt-5 md:grid-cols-3 lg:grid-cols-4",children:t.map(e=>{var t;let{uid:r,id:i,data:{tour_title:l,tour_blurb:s}}=e;return(null===(t=l[0])||void 0===t?void 0:t.text)?(0,n.jsx)("article",{children:(0,n.jsxs)("div",{className:"max-w-md rounded-lg bg-white py-4 px-8 shadow-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-3xl text-gray-800 ".concat(o().className),children:l[0].text}),s&&(0,n.jsx)("div",{className:"mt-2 text-gray-600",children:(0,n.jsx)(p.v,{field:s})})]}),(0,n.jsx)("div",{className:"mt-4 flex justify-end",children:(0,n.jsx)(h,{name:"sfTourLocation",tourLocationUid:r,children:(0,n.jsx)("a",{href:"#",className:"text-xl font-medium text-indigo-500",children:"Learn More"})})})]})},i):null})}),_&&(0,n.jsx)(g.Wrapper,{apiKey:_,render:e=>(0,n.jsx)("div",{children:e}),children:(0,n.jsx)(E,{center:j,zoom:12,style:{width:"100%",height:"100vh"},children:l.map((e,t)=>{let{lat:r,lng:o,uid:l}=e;return(0,n.jsx)(x,{position:{lat:r,lng:o},clickable:!0,label:"".concat(t+1),onClick:()=>{i(l)}},l)})})})]})};var I=C},2598:function(e,t,r){"use strict";r.d(t,{k:function(){return i}});let n=new class{debug(e,t){this.console.debug("DEBUG :::",e,t)}info(e,t){this.console.debug("INFO :::",e,t)}warn(e,t){this.console.debug("WARN :::",e,t)}error(e,t){this.console.debug("Error :::",e,t)}exception(e,t){this.console.debug("EXCEPTION :::",e,t)}constructor(e){this.console=e}}(console),i={debug:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.debug(...t)},info:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.info(...t)},warn:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.warn(...t)},error:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.error(...t)},exception:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.exception(...t)}}},4157:function(e){e.exports={style:{fontFamily:"'__DM_Serif_Display_3b3a0c', '__DM_Serif_Display_Fallback_3b3a0c'",fontWeight:400,fontStyle:"normal"},className:"__className_3b3a0c"}},1664:function(e,t,r){e.exports=r(1551)}},function(e){e.O(0,[414,774,888,179],function(){return e(e.s=579)}),_N_E=e.O()}]);